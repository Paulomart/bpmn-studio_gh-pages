"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const node_fetch_1 = require("node-fetch");
function sendSlackMessage(message) {
    const body = {
        text: message
    };
    return node_fetch_1.default(getSlackWebhook(), {
        method: 'post',
        body: JSON.stringify(body),
        headers: { 'Content-Type': 'application/json' }
    });
}
exports.sendSlackMessage = sendSlackMessage;
function getSlackWebhook() {
    const webhook = process.env.SLACK_WEBHOOK;
    if (webhook === undefined) {
        throw new Error("The slack incoming webhook URL must be configured as environment variable 'SLACK_WEBHOOK'!");
    }
    return webhook;
}
//# sourceMappingURL=notifier.js.map