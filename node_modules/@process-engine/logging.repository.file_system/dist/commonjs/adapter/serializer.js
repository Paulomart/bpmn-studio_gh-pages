"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const errors_ts_1 = require("@essential-projects/errors_ts");
function serialize(error) {
    const errorIsFromEssentialProjects = errors_ts_1.isEssentialProjectsError(error);
    if (errorIsFromEssentialProjects) {
        return error.serialize();
    }
    const errorIsString = typeof error === 'string';
    if (errorIsString) {
        return error;
    }
    return JSON.stringify(error);
}
exports.serialize = serialize;
function deserialize(error) {
    const essentialProjectsError = tryDeserializeEssentialProjectsError(error);
    const errorIsFromEssentialProjects = essentialProjectsError !== undefined;
    if (errorIsFromEssentialProjects) {
        return essentialProjectsError;
    }
    return tryParse(error);
}
exports.deserialize = deserialize;
function tryDeserializeEssentialProjectsError(value) {
    try {
        return errors_ts_1.BaseError.deserialize(value);
    }
    catch (error) {
        return undefined;
    }
}
exports.tryDeserializeEssentialProjectsError = tryDeserializeEssentialProjectsError;
// eslint-disable-next-line @typescript-eslint/no-explicit-any
function tryParse(value) {
    try {
        return JSON.parse(value);
    }
    catch (error) {
        // Value is not a JSON - return it as it is.
        return value;
    }
}
exports.tryParse = tryParse;
//# sourceMappingURL=serializer.js.map