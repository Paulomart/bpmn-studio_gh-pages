define(["require", "exports", "@essential-projects/errors_ts", "@process-engine/persistence_api.contracts", "../../../type_factory", "./activity_factory"], function (require, exports, errors_ts_1, persistence_api_contracts_1, type_factory_1, activity_factory_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    function parseReceiveTasks(processData, eventDefinitions) {
        const receiveTasksRaw = type_factory_1.getModelPropertyAsArray(processData, persistence_api_contracts_1.BpmnTags.TaskElement.ReceiveTask);
        const noReceiveTasksFound = !((receiveTasksRaw === null || receiveTasksRaw === void 0 ? void 0 : receiveTasksRaw.length) > 0);
        if (noReceiveTasksFound) {
            return [];
        }
        const receiveTasks = receiveTasksRaw.map((receiveTaskRaw) => {
            const receiveTask = activity_factory_1.createActivityInstance(receiveTaskRaw, persistence_api_contracts_1.Model.Activities.ReceiveTask);
            if (!receiveTaskRaw.messageRef) {
                throw new errors_ts_1.UnprocessableEntityError(`ReceiveTask ${receiveTaskRaw.id} does not have a messageRef!`);
            }
            receiveTask.messageEventDefinition = eventDefinitions.find((entry) => entry.id === receiveTaskRaw.messageRef);
            return receiveTask;
        });
        return receiveTasks;
    }
    exports.parseReceiveTasks = parseReceiveTasks;
});
//# sourceMappingURL=receive_task_parser.js.map