import { IEventAggregator } from '@essential-projects/event_aggregator_contracts';
import { IIdentity } from '@essential-projects/iam_contracts';
import { FlowNodeInstance, IExternalTaskRepository, Model, ProcessToken } from '@process-engine/persistence_api.contracts';
import { IFlowNodeHandlerFactory, IFlowNodePersistenceFacade, IProcessModelFacade, IProcessTokenFacade } from '@process-engine/process_engine_contracts';
import { ActivityHandler } from '../activity_handler';
export declare class ExternalServiceTaskHandler extends ActivityHandler<Model.Activities.ServiceTask> {
    private externalTaskRepository;
    private externalTaskSubscription;
    constructor(eventAggregator: IEventAggregator, externalTaskRepository: IExternalTaskRepository, flowNodeHandlerFactory: IFlowNodeHandlerFactory, flowNodePersistenceFacade: IFlowNodePersistenceFacade, serviceTaskModel: Model.Activities.ServiceTask);
    private get serviceTask();
    protected startExecution(token: ProcessToken, processTokenFacade: IProcessTokenFacade, processModelFacade: IProcessModelFacade, identity: IIdentity): Promise<Array<Model.Base.FlowNode>>;
    protected continueAfterSuspend(flowNodeInstance: FlowNodeInstance, onSuspendToken: ProcessToken, processTokenFacade: IProcessTokenFacade, processModelFacade: IProcessModelFacade, identity: IIdentity): Promise<Array<Model.Base.FlowNode>>;
    protected executeHandler(token: ProcessToken, processTokenFacade: IProcessTokenFacade, processModelFacade: IProcessModelFacade, identity: IIdentity): Promise<Array<Model.Base.FlowNode>>;
    /**
     * Creates a new ExternalTask and delegates its execution to an
     * external Service.
     * The handler will be suspended, until the ExternalTask has finished.
     *
     * @async
     * @param   token              The current ProcessToken.
     * @param   processTokenFacade The Facade for accessing all ProcessTokens of the
     *                             currently running ProcessInstance.
     * @param   identity           The identity that started the ProcessInstance.
     * @returns                    The ServiceTask's result.
     */
    private executeExternalServiceTask;
    private waitForExternalTaskResult;
    private getExternalTaskForFlowNodeInstance;
    private createExternalTask;
    private parseExternalTaskTopic;
    private parseExternalTaskPayload;
    private publishExternalTaskCreatedNotification;
    private abortExternalTask;
}
