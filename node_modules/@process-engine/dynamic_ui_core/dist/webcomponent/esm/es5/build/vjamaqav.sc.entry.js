import{h}from"../dynamic-task-components.core.js";import{a as BooleanFormField}from"./chunk-4364ef72.js";import"./chunk-d8a0f336.js";import{a as DateFormField}from"./chunk-8e3d840d.js";import"./chunk-75b119d8.js";import{a as EnumFormField}from"./chunk-7c18fe09.js";import{a as LongFormField}from"./chunk-0fe4c31f.js";import{a as NumberFormField}from"./chunk-be7798b7.js";import{a as StringFormField}from"./chunk-be5081ec.js";var DynamicUserTaskComponent=function(){function e(){this._formFieldComponentsForTyp=[],this._formFields=[],this._formFieldComponentsForTyp.string=StringFormField,this._formFieldComponentsForTyp.long=LongFormField,this._formFieldComponentsForTyp.number=NumberFormField,this._formFieldComponentsForTyp.boolean=BooleanFormField,this._formFieldComponentsForTyp.decimal=NumberFormField,this._formFieldComponentsForTyp.date=DateFormField,this._formFieldComponentsForTyp.enum=EnumFormField}return e.prototype.componentWillLoad=function(){this.watchUserTaskHandler(this.usertask,void 0)},e.prototype.watchUserTaskHandler=function(e,t){if(this._formFields=[],null!=e)for(var r=0,n=e.data.formFields;r<n.length;r++){var o=this._createComponentForFormField(n[r]);o.componentWillLoad(),this._formFields.push(o)}},e.prototype.render=function(){return null!=this.usertask?"confirm"===this.usertask.data.preferredControl?this._renderConfirmUserTask():this._renderUserTask():h("div",{class:"card form_card"},h("div",{class:"card-body"},h("h3",{class:"card-title mb-0"},"UserTask finished.")))},e.prototype._renderConfirmUserTask=function(){var e=this,t=this.usertask.data.formFields.find(function(e){return"boolean"===e.type}),r=this.usertask.data.formFields.indexOf(t);return this._formFields.splice(r,1),h("div",{class:"card form_card"},h("div",{class:"card-body"},h("h3",{class:"card-title"},this.usertask.name),this._formFields.map(function(e){return e.render()}),h("p",null,t.label),h("br",null),h("div",{class:"float-right"},h("button",{type:"button",class:"btn btn-secondary",onClick:function(t){return e._handleCancel(t)},id:"dynamic-ui-wrapper-cancel-button"},"Cancel")," ",h("button",{type:"button",class:"btn btn-danger",onClick:function(t){return e._handleDecline(t)},id:"dynamic-ui-wrapper-decline-button"},"Decline")," ",h("button",{type:"button",class:"btn btn-success",onClick:function(t){return e._handleProceed(t)},id:"dynamic-ui-wrapper-proceed-button"},"Proceed"))))},e.prototype._renderUserTask=function(){var e=this;return h("div",{class:"card form_card"},h("div",{class:"card-body"},h("h3",{class:"card-title"},this.usertask.name),h("form",{onSubmit:function(t){return e._handleSubmit(t)}},this._formFields.map(function(e){return e.render()}),h("br",null),h("div",{class:"float-right"},h("button",{type:"button",class:"btn btn-secondary",onClick:function(t){return e._handleCancel(t)},id:"dynamic-ui-wrapper-cancel-button"},"Cancel")," ",h("button",{type:"submit",class:"btn btn-primary",id:"dynamic-ui-wrapper-continue-button"},"Continue")))))},e.prototype._handleSubmit=function(e){e.preventDefault(),this._isInputValid()&&this.submitted.emit({correlationId:this.usertask.correlationId,processInstanceId:this.usertask.processInstanceId,userTaskId:this.usertask.id,flowNodeInstanceId:this.usertask.flowNodeInstanceId,results:this._getFormResults()})},e.prototype._handleProceed=function(e){this.submitted.emit({correlationId:this.usertask.correlationId,processInstanceId:this.usertask.processInstanceId,userTaskId:this.usertask.id,flowNodeInstanceId:this.usertask.flowNodeInstanceId,results:this._getConfirmResult(!0)})},e.prototype._handleDecline=function(e){this.submitted.emit({correlationId:this.usertask.correlationId,processInstanceId:this.usertask.processInstanceId,userTaskId:this.usertask.id,flowNodeInstanceId:this.usertask.flowNodeInstanceId,results:this._getConfirmResult(!1)})},e.prototype._handleCancel=function(e){this.canceled.emit()},e.prototype._isInputValid=function(){for(var e=0,t=this._formFields;e<t.length;e++)if(!t[e].isValid)return!1;return!0},e.prototype._getFormResults=function(){for(var e={formFields:{}},t=0,r=this._formFields;t<r.length;t++){var n=r[t];e.formFields[n.name]=n.value}return e},e.prototype._getConfirmResult=function(e){for(var t={formFields:{}},r=this.usertask.data.formFields.find(function(e){return"boolean"===e.type}),n=0,o=this._formFields;n<o.length;n++){var s=o[n];t.formFields[s.name]=s.value}return t.formFields[r.id]=e,t},e.prototype._createComponentForFormField=function(e){var t=new(0,this._formFieldComponentsForTyp[e.type]);return t.formField=e,t.value=e.defaultValue,t},Object.defineProperty(e,"is",{get:function(){return"dynamic-usertask-component"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{usertask:{type:"Any",attr:"usertask",watchCallbacks:["watchUserTaskHandler"]}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"events",{get:function(){return[{name:"submitted",method:"submitted",bubbles:!0,cancelable:!0,composed:!0},{name:"canceled",method:"canceled",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return""},enumerable:!0,configurable:!0}),e}();export{DynamicUserTaskComponent as DynamicUsertaskComponent};