"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var dynamic_task_components_core_js_1 = require("../dynamic-task-components.core.js");
var chunk_4364ef72_js_1 = require("./chunk-4364ef72.js");
require("./chunk-d8a0f336.js");
var chunk_8e3d840d_js_1 = require("./chunk-8e3d840d.js");
require("./chunk-75b119d8.js");
var chunk_7c18fe09_js_1 = require("./chunk-7c18fe09.js");
var chunk_0fe4c31f_js_1 = require("./chunk-0fe4c31f.js");
var chunk_be7798b7_js_1 = require("./chunk-be7798b7.js");
var chunk_be5081ec_js_1 = require("./chunk-be5081ec.js");
var DynamicUserTaskComponent = function () { function e() { this._formFieldComponentsForTyp = [], this._formFields = [], this._formFieldComponentsForTyp.string = chunk_be5081ec_js_1.a, this._formFieldComponentsForTyp.long = chunk_0fe4c31f_js_1.a, this._formFieldComponentsForTyp.number = chunk_be7798b7_js_1.a, this._formFieldComponentsForTyp.boolean = chunk_4364ef72_js_1.a, this._formFieldComponentsForTyp.decimal = chunk_be7798b7_js_1.a, this._formFieldComponentsForTyp.date = chunk_8e3d840d_js_1.a, this._formFieldComponentsForTyp.enum = chunk_7c18fe09_js_1.a; } return e.prototype.componentWillLoad = function () { this.watchUserTaskHandler(this.usertask, void 0); }, e.prototype.watchUserTaskHandler = function (e, t) { if (this._formFields = [], null != e)
    for (var r = 0, n = e.data.formFields; r < n.length; r++) {
        var o = this._createComponentForFormField(n[r]);
        o.componentWillLoad(), this._formFields.push(o);
    } }, e.prototype.render = function () { return null != this.usertask ? "confirm" === this.usertask.data.preferredControl ? this._renderConfirmUserTask() : this._renderUserTask() : dynamic_task_components_core_js_1.h("div", { class: "card form_card" }, dynamic_task_components_core_js_1.h("div", { class: "card-body" }, dynamic_task_components_core_js_1.h("h3", { class: "card-title mb-0" }, "UserTask finished."))); }, e.prototype._renderConfirmUserTask = function () { var e = this, t = this.usertask.data.formFields.find(function (e) { return "boolean" === e.type; }), r = this.usertask.data.formFields.indexOf(t); return this._formFields.splice(r, 1), dynamic_task_components_core_js_1.h("div", { class: "card form_card" }, dynamic_task_components_core_js_1.h("div", { class: "card-body" }, dynamic_task_components_core_js_1.h("h3", { class: "card-title" }, this.usertask.name), this._formFields.map(function (e) { return e.render(); }), dynamic_task_components_core_js_1.h("p", null, t.label), dynamic_task_components_core_js_1.h("br", null), dynamic_task_components_core_js_1.h("div", { class: "float-right" }, dynamic_task_components_core_js_1.h("button", { type: "button", class: "btn btn-secondary", onClick: function (t) { return e._handleCancel(t); }, id: "dynamic-ui-wrapper-cancel-button" }, "Cancel"), " ", dynamic_task_components_core_js_1.h("button", { type: "button", class: "btn btn-danger", onClick: function (t) { return e._handleDecline(t); }, id: "dynamic-ui-wrapper-decline-button" }, "Decline"), " ", dynamic_task_components_core_js_1.h("button", { type: "button", class: "btn btn-success", onClick: function (t) { return e._handleProceed(t); }, id: "dynamic-ui-wrapper-proceed-button" }, "Proceed")))); }, e.prototype._renderUserTask = function () { var e = this; return dynamic_task_components_core_js_1.h("div", { class: "card form_card" }, dynamic_task_components_core_js_1.h("div", { class: "card-body" }, dynamic_task_components_core_js_1.h("h3", { class: "card-title" }, this.usertask.name), dynamic_task_components_core_js_1.h("form", { onSubmit: function (t) { return e._handleSubmit(t); } }, this._formFields.map(function (e) { return e.render(); }), dynamic_task_components_core_js_1.h("br", null), dynamic_task_components_core_js_1.h("div", { class: "float-right" }, dynamic_task_components_core_js_1.h("button", { type: "button", class: "btn btn-secondary", onClick: function (t) { return e._handleCancel(t); }, id: "dynamic-ui-wrapper-cancel-button" }, "Cancel"), " ", dynamic_task_components_core_js_1.h("button", { type: "submit", class: "btn btn-primary", id: "dynamic-ui-wrapper-continue-button" }, "Continue"))))); }, e.prototype._handleSubmit = function (e) { e.preventDefault(), this._isInputValid() && this.submitted.emit({ correlationId: this.usertask.correlationId, processInstanceId: this.usertask.processInstanceId, userTaskId: this.usertask.id, flowNodeInstanceId: this.usertask.flowNodeInstanceId, results: this._getFormResults() }); }, e.prototype._handleProceed = function (e) { this.submitted.emit({ correlationId: this.usertask.correlationId, processInstanceId: this.usertask.processInstanceId, userTaskId: this.usertask.id, flowNodeInstanceId: this.usertask.flowNodeInstanceId, results: this._getConfirmResult(!0) }); }, e.prototype._handleDecline = function (e) { this.submitted.emit({ correlationId: this.usertask.correlationId, processInstanceId: this.usertask.processInstanceId, userTaskId: this.usertask.id, flowNodeInstanceId: this.usertask.flowNodeInstanceId, results: this._getConfirmResult(!1) }); }, e.prototype._handleCancel = function (e) { this.canceled.emit(); }, e.prototype._isInputValid = function () { for (var e = 0, t = this._formFields; e < t.length; e++)
    if (!t[e].isValid)
        return !1; return !0; }, e.prototype._getFormResults = function () { for (var e = { formFields: {} }, t = 0, r = this._formFields; t < r.length; t++) {
    var n = r[t];
    e.formFields[n.name] = n.value;
} return e; }, e.prototype._getConfirmResult = function (e) { for (var t = { formFields: {} }, r = this.usertask.data.formFields.find(function (e) { return "boolean" === e.type; }), n = 0, o = this._formFields; n < o.length; n++) {
    var s = o[n];
    t.formFields[s.name] = s.value;
} return t.formFields[r.id] = e, t; }, e.prototype._createComponentForFormField = function (e) { var t = new (0, this._formFieldComponentsForTyp[e.type]); return t.formField = e, t.value = e.defaultValue, t; }, Object.defineProperty(e, "is", { get: function () { return "dynamic-usertask-component"; }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "properties", { get: function () { return { usertask: { type: "Any", attr: "usertask", watchCallbacks: ["watchUserTaskHandler"] } }; }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "events", { get: function () { return [{ name: "submitted", method: "submitted", bubbles: !0, cancelable: !0, composed: !0 }, { name: "canceled", method: "canceled", bubbles: !0, cancelable: !0, composed: !0 }]; }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "style", { get: function () { return ""; }, enumerable: !0, configurable: !0 }), e; }();
exports.DynamicUsertaskComponent = DynamicUserTaskComponent;
