const e=window.DynamicTaskComponents.h;import{a as s}from"./chunk-4364ef72.js";import"./chunk-d8a0f336.js";import{a as t}from"./chunk-8e3d840d.js";import"./chunk-75b119d8.js";import{a as r}from"./chunk-7c18fe09.js";import{a as n}from"./chunk-0fe4c31f.js";import{a as o}from"./chunk-be7798b7.js";import{a}from"./chunk-be5081ec.js";class i{constructor(){this._formFieldComponentsForTyp=[],this._formFields=[],this._formFieldComponentsForTyp.string=a,this._formFieldComponentsForTyp.long=n,this._formFieldComponentsForTyp.number=o,this._formFieldComponentsForTyp.boolean=s,this._formFieldComponentsForTyp.decimal=o,this._formFieldComponentsForTyp.date=t,this._formFieldComponentsForTyp.enum=r}componentWillLoad(){this.watchUserTaskHandler(this.usertask,void 0)}watchUserTaskHandler(e,s){if(this._formFields=[],null!=e)for(const s of e.data.formFields){const e=this._createComponentForFormField(s);e.componentWillLoad(),this._formFields.push(e)}}render(){return null!=this.usertask?"confirm"===this.usertask.data.preferredControl?this._renderConfirmUserTask():this._renderUserTask():e("div",{class:"card form_card"},e("div",{class:"card-body"},e("h3",{class:"card-title mb-0"},"UserTask finished.")))}_renderConfirmUserTask(){const s=this.usertask.data.formFields.find(e=>"boolean"===e.type),t=this.usertask.data.formFields.indexOf(s);return this._formFields.splice(t,1),e("div",{class:"card form_card"},e("div",{class:"card-body"},e("h3",{class:"card-title"},this.usertask.name),this._formFields.map(e=>e.render()),e("p",null,s.label),e("br",null),e("div",{class:"float-right"},e("button",{type:"button",class:"btn btn-secondary",onClick:e=>this._handleCancel(e),id:"dynamic-ui-wrapper-cancel-button"},"Cancel")," ",e("button",{type:"button",class:"btn btn-danger",onClick:e=>this._handleDecline(e),id:"dynamic-ui-wrapper-decline-button"},"Decline")," ",e("button",{type:"button",class:"btn btn-success",onClick:e=>this._handleProceed(e),id:"dynamic-ui-wrapper-proceed-button"},"Proceed"))))}_renderUserTask(){return e("div",{class:"card form_card"},e("div",{class:"card-body"},e("h3",{class:"card-title"},this.usertask.name),e("form",{onSubmit:e=>this._handleSubmit(e)},this._formFields.map(e=>e.render()),e("br",null),e("div",{class:"float-right"},e("button",{type:"button",class:"btn btn-secondary",onClick:e=>this._handleCancel(e),id:"dynamic-ui-wrapper-cancel-button"},"Cancel")," ",e("button",{type:"submit",class:"btn btn-primary",id:"dynamic-ui-wrapper-continue-button"},"Continue")))))}_handleSubmit(e){e.preventDefault(),this._isInputValid()&&this.submitted.emit({correlationId:this.usertask.correlationId,processInstanceId:this.usertask.processInstanceId,userTaskId:this.usertask.id,flowNodeInstanceId:this.usertask.flowNodeInstanceId,results:this._getFormResults()})}_handleProceed(e){this.submitted.emit({correlationId:this.usertask.correlationId,processInstanceId:this.usertask.processInstanceId,userTaskId:this.usertask.id,flowNodeInstanceId:this.usertask.flowNodeInstanceId,results:this._getConfirmResult(!0)})}_handleDecline(e){this.submitted.emit({correlationId:this.usertask.correlationId,processInstanceId:this.usertask.processInstanceId,userTaskId:this.usertask.id,flowNodeInstanceId:this.usertask.flowNodeInstanceId,results:this._getConfirmResult(!1)})}_handleCancel(e){this.canceled.emit()}_isInputValid(){for(const e of this._formFields)if(!e.isValid)return!1;return!0}_getFormResults(){const e={formFields:{}};for(const s of this._formFields)e.formFields[s.name]=s.value;return e}_getConfirmResult(e){const s={formFields:{}},t=this.usertask.data.formFields.find(e=>"boolean"===e.type);for(const e of this._formFields)s.formFields[e.name]=e.value;return s.formFields[t.id]=e,s}_createComponentForFormField(e){const s=new(0,this._formFieldComponentsForTyp[e.type]);return s.formField=e,s.value=e.defaultValue,s}static get is(){return"dynamic-usertask-component"}static get properties(){return{usertask:{type:"Any",attr:"usertask",watchCallbacks:["watchUserTaskHandler"]}}}static get events(){return[{name:"submitted",method:"submitted",bubbles:!0,cancelable:!0,composed:!0},{name:"canceled",method:"canceled",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return""}}export{i as DynamicUsertaskComponent};